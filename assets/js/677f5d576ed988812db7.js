!function(e){var t={};function o(n){if(t[n])return t[n].exports;var d=t[n]={i:n,l:!1,exports:{}};return e[n].call(d.exports,d,d.exports,o),d.l=!0,d.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)o.d(n,d,function(t){return e[t]}.bind(null,d));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";const n=document.querySelector("#avatar"),d=document.querySelector("#name");firebase.initializeApp({apiKey:"AIzaSyCQp4B5XmxiRcOH5xnPbRNN-EvgGgYt30o",authDomain:"food-f53db.firebaseapp.com",databaseURL:"https://food-f53db.firebaseio.com",projectId:"food-f53db",storageBucket:"food-f53db.appspot.com",messagingSenderId:"662890986544",appId:"1:662890986544:web:2156f9f8ed044df3f581f5"});var a,c=new firebase.auth.GoogleAuthProvider,l={};firebase.auth().onAuthStateChanged((function(e){e?(console.log("User is signed in."),a=firebase.auth().currentUser,n.style.backgroundImage=`url(${a.photoURL})`,d.textContent=a.displayName,document.querySelector(".singin").style.display="none",document.querySelector(".header").style.display="flex",document.querySelector(".content").style.display="flex",function(){const e=firebase.database().ref(`Todo/${a.uid}/Folder/`);let t={};e.once("value",(function(e){t=e.val();for(const e in t)s.insertAdjacentHTML("afterbegin",`<span class='folder-name'>${e}</span>`),u.forEach(t=>{t.insertAdjacentHTML("afterbegin",`<span class='folder-name'>${e}</span>`)})}),(function(e){console.log("Error: "+e.code)}))}(),firebase.database().ref(`Todo/${a.uid}/All/`).once("value",(function(e){null!=l&&(l=e.val(),A(l))}),(function(e){console.log("Error: "+e.code)}))):(console.log("No user is signed in."),document.querySelector(".singin").style.display="flex")}));document.querySelector("#btnAddFolder"),document.querySelector("#createFolder");const i=document.querySelector("#btnAddTask"),r=document.querySelector("#btnSave"),s=document.querySelector(".folder-block"),u=document.querySelectorAll(".folder-list"),b=document.querySelector("#todoValue"),f=document.querySelectorAll("#btn-tabs"),y=document.querySelectorAll("#todoList"),m=document.querySelector(".singin-btn"),p=document.querySelector(".header-exit"),v=document.querySelector("#addTodo"),S=document.querySelector(".popup"),q=document.querySelector("#editValue");let k,g;function $(e){document.querySelectorAll(".folder-name").forEach(t=>{t.addEventListener("click",()=>{document.querySelectorAll("#showFolderList").forEach(o=>{o.textContent=t.textContent,firebase.database().ref(`Todo/${a.uid}/Folder/`).child(t.textContent).update({id:e})})})})}document.querySelector("#menu").addEventListener("click",()=>{document.querySelector("#menu").checked?(window.innerWidth>768&&(document.querySelector(".content-todo").style.width="100%"),document.querySelector(".content-menu").style.left="-320px",document.querySelector(".content-menu").style.width="0px"):(window.innerWidth>768&&(document.querySelector(".content-todo").style.width="100%"),document.querySelector(".content-menu").style.left="0px",document.querySelector(".content-menu").style.width="320px")}),m.addEventListener("click",()=>{firebase.auth().signInWithPopup(c).then((function(e){var t=e.credential.accessToken;(a=e.user).photoURL,console.log(t),console.log(a),n.style.backgroundImage=`url(${a.photoURL})`,document.querySelector(".header").style.display="flex",document.querySelector(".content").style.display="flex"})).catch((function(e){e.code,e.message,console.log(e.code),console.log(e.message)})),document.querySelector(".singin").style.display="none"}),p.addEventListener("click",()=>{location.reload(),firebase.auth().signOut().then((function(){console.log("Signout Succesfull")}),(function(e){console.log("Signout Failed")}))});const x=e=>{const t=document.querySelector(`[data-btn-delete="${e}"]`);t.addEventListener("click",()=>{firebase.database().ref(`Todo/${a.uid}/All/`).child(t.dataset.btnDelete).remove(),document.querySelector(`[data-task-block="${t.dataset.btnDelete}"]`).remove()})},L=()=>{g=document.querySelectorAll(".todo-btn-ok"),g.forEach(e=>{e.addEventListener("click",()=>{let t=document.querySelector(`[data-task-num="${e.dataset.btnOk}"]`);e.checked?t.style.textDecoration="line-through":t.style.textDecoration="none",firebase.database().ref(`Todo/${a.uid}/All/${e.dataset.btnOk}`).update({performed:e.checked})})})},h=e=>{const t=document.querySelector(`[data-btn-favorite="${e}"]`);t.addEventListener("click",()=>{const e=t.dataset.btnFavorite;t.classList.toggle("todo-btn__active"),firebase.database().ref(`Todo/${a.uid}/All/${e}`).update({favorites:t.classList.contains("todo-btn__active")})})},_=e=>{const t=document.querySelector(`[data-btn-fixed="${e}"]`);t.addEventListener("click",()=>{const e=t.dataset.btnFixed;t.classList.toggle("todo-btn__active"),firebase.database().ref(`Todo/${a.uid}/All/${e}`).update({fixed:t.classList.contains("todo-btn__active")})})},E=e=>{document.querySelector(`[data-btn-ok="${e.id}"]`).checked=e.performed,e.performed&&(document.querySelector(`[data-task-block="${e.id}"]`).style.textDecoration="line-through"),e.fixed&&document.querySelector(`[data-btn-fixed="${e.id}"]`).classList.add("todo-btn__active"),e.favorites&&document.querySelector(`[data-btn-favorite="${e.id}"]`).classList.add("todo-btn__active")},A=e=>{for(let t in e){const o=document.querySelector("#todoList");let n=document.createElement("div");n.classList.add("todo-block-task"),n.setAttribute("data-task-block",e[t].id),n.innerHTML=`\n            <input type="checkbox" data-btn-ok=${e[t].id} id=${e[t].id} class="todo-btn-ok"></input>\n            <label for=${e[t].id}></label>\n            <span class="todo-task" data-task-num="${e[t].id}">${e[t].value}</span>\n            <div class="todo-btns">\n                <button class="todo-btn" data-btn-fixed="${e[t].id}" id="btnFixed">\n                    <i class="todo-btn-icon icon-fixed uil uil-arrow-circle-up"></i>\n                </button>\n                <button class="todo-btn" data-btn-favorite="${e[t].id}" id="btnFavorite">\n                  <i class="todo-btn-icon icon__favorite uil uil-heart-alt"></i>\n                </button>\n                <button class="todo-btn btn-delete" id="btnDelete" data-btn-delete=${e[t].id}>\n                  <i class="todo-btn-icon uil uil-times-circle"></i>\n                </button>\n            </div>\n            `,o.prepend(n),E(e[t]),_(e[t].id),h(e[t].id),x(e[t].id),$(e[t].id)}L(),(()=>{let e;k=document.querySelectorAll(".todo-block-task"),k.forEach((t,o)=>{t.addEventListener("click",n=>{n.target===t&&(S.style.display="block",e=t.dataset.taskBlock,q.setAttribute("data-task-edit",e),q.value=document.querySelectorAll(".todo-task")[o].textContent,document.querySelector(`[data-btn-favorite="${e}"]`).classList.contains("todo-btn__active")&&(document.querySelector("#btnFavoriteEdit").classList.add("todo-btn__active"),console.log(e)),document.querySelector(`[data-btn-fixed="${e}"]`).classList.contains("todo-btn__active")&&(document.querySelector("#btnFixedEdit").classList.add("todo-btn__active"),console.log(e)),setTimeout(()=>document.querySelector(".popup-edit-todo").style.bottom="calc(100% - 261px)",200))})}),document.querySelector("#btnFavoriteEdit").addEventListener("click",t=>{document.querySelector("#btnFavoriteEdit").classList.toggle("todo-btn__active"),console.log(e),document.querySelector(`[data-btn-favorite="${e}"]`).classList.toggle("todo-btn__active"),firebase.database().ref(`Todo/${a.uid}/All/${e}`).update({favorites:document.querySelector(`[data-btn-favorite="${e}"]`).classList.contains("todo-btn__active")})}),document.querySelector("#btnFixedEdit").addEventListener("click",t=>{document.querySelector("#btnFixedEdit").classList.toggle("todo-btn__active"),console.log(e),document.querySelector(`[data-btn-fixed="${e}"]`).classList.toggle("todo-btn__active"),firebase.database().ref(`Todo/${a.uid}/All/${e}`).update({fixed:document.querySelector(`[data-btn-fixed="${e}"]`).classList.contains("todo-btn__active")})})})()},T=e=>{const t=document.querySelector("#todoList");let o=document.createElement("div"),n=Date.now();var d,c;o.classList.add("todo-block-task"),o.setAttribute("data-task-block",n),o.innerHTML=`\n            <input type="checkbox" data-btn-ok=${n} id=${n} class="todo-btn-ok"></input>\n            <label for=${n}></label>\n            <span class="todo-task" data-task-num="${n}">${e}</span>\n            <div class="todo-btns">\n                <button class="todo-btn" data-btn-fixed="${n}" id="btnFixed">\n                  <i class="todo-btn-icon icon-fixed uil uil-arrow-circle-up"></i>\n                </button>\n                <button class="todo-btn" data-btn-favorite="${n}" id="btnFavorite">\n                    <i class="todo-btn-icon icon__favorite uil uil-heart-alt"></i>\n                </button>\n                <button class="todo-btn btn-delete" id="btnDelete" data-btn-delete=${n}>\n                  <i class="todo-btn-icon uil uil-times-circle"></i>\n                </button>\n            </div>\n        `,t.prepend(o),d=e,c=n,console.log(a.uid),firebase.database().ref(`Todo/${a.uid}/All/`).child(c).update({id:c,value:d,performed:!1,favorites:!1,fixed:!1}),L(),_(n),h(n),x(n)};document.addEventListener("keypress",e=>{"Enter"===e.code&&""!=b.value&&b.value.trim()&&(T(b.value),b.value="",S.style.display="none",document.querySelector(".popup-add-todo").style.top="-700px")}),i.addEventListener("click",e=>{""!=b.value&&b.value.trim()&&(T(b.value),b.value="",S.style.display="none",document.querySelector(".popup-add-todo").style.top="-700px")}),v.addEventListener("click",()=>{S.style.display="block",setTimeout(()=>document.querySelector(".popup-add-todo").style.top="71px",10)});const F=e=>{const t=document.querySelector("#editValue");"Enter"!==e.code&&"click"!==e.type||""==t.value||!t.value.trim()||(document.querySelector(`[data-task-num="${t.dataset.taskEdit}"]`).textContent=t.value,firebase.database().ref(`Todo/${a.uid}/All/${t.dataset.taskEdit}`).update({value:t.value}),S.style.display="none",document.querySelector(".popup-edit-todo").style.bottom="-700px")};q.addEventListener("keypress",e=>F(e)),r.addEventListener("click",e=>F(e)),S.addEventListener("click",e=>{e.target===S&&(S.style.display="none",document.querySelector("#btnFavoriteEdit").classList.remove("todo-btn__active"),document.querySelector("#btnFixedEdit").classList.remove("todo-btn__active"),document.querySelector(".popup-add-todo").style.top="-700px",document.querySelector(".popup-add-folder").style.top="-700px",document.querySelector(".popup-edit-todo").style.bottom="-700px")});f.forEach((e,t)=>{e.addEventListener("click",()=>{for(let e=0;e<f.length;e++)f[e].classList.remove("tab-active");e.classList.add("tab-active"),(e=>{for(let t=0;t<y.length;t++)y[t].style.display=e===t?"block":"none"})(t),(e=>{const t=document.querySelector(`[data-name-list="${e}"]`);firebase.database().ref(`Todo/${a.uid}/All/`).once("value",o=>{if(null!=l){if(l=o.val(),"incoming"===e)for(let e in l)t.prepend(document.querySelector(`[data-task-block="${l[e].id}"]`));for(let o in l)l[o][e]&&(console.log(l[o][e]),t.prepend(document.querySelector(`[data-task-block="${l[o].id}"]`)))}},e=>{console.log("Error: "+e.code)})})(e.dataset.nameTab)})})}]);